function PsFormData(n){var t=Object.create(PsFormData.prototype),r,i;if(t.values=[],t.append("ajaxRequest",!0),n)for(r=n.elements,i=0;i<r.length;i++)t.appendObject(r[i]);return t}function UrlHistory(){return Object.create(UrlHistory.prototype)}function NotificationRenderer(){return Object.create(NotificationRenderer.prototype)}function Notification(n,t,i,r){var u=Object.create(Notification.prototype);return u.details=r,u.message=i,u.title=t,u.type=n,u}function NotificationDetail(n,t){var i=Object.create(NotificationDetail.prototype);return i.message=t,i.type=n,i}function Notifier(){return Object.create(Notifier.prototype)}function AjaxResultProcessor(){return Object.create(AjaxResultProcessor.prototype)}function registerAjaxCall(n){var t=document.getElementById("RegistrationWidget-"+n),i=new PsFormData(t);i.append("widgetRequest",!0);_.ajax({data:i,method:"POST",url:t.attr("action"),context:this,done:function(i,r,u){(new AjaxResultProcessor).handleResult(u,function(i){var r=t.find(".font-small-error")[0];i.Status===ps.ajaxResultCodes.Error?((isRecaptchaError(i.ResultSet)||isGRecaptchaV2(n))&&renderRecaptchaV2(n),r.removeClass("hidden"),r.find(".font-small-error-text")[0].innerHTML=i.ResultSet):r.addClass("hidden");refreshCaptchaImages()})},fail:function(){window.location="/error"}})}function onRegistrationWidgetSubmission(n){if(!n.keyCode||n.keyCode===KeyCode.Enter){n.preventDefault();n.stopPropagation();var i=_(n.target.closest("[id^='RegistrationWidget-']")),t=i.attr("id").split("-")[1];typeof grecaptcha!="undefined"?loadToken("RegisterAction",registerAjaxCall,t):registerAjaxCall(t)}}function initRegistrationWidget(n){n.forEach(function(n){var t=n.find("button")[0],i;if(t.attr("type")!=="button"){t.setAttr("type","button");t.on("click",onRegistrationWidgetSubmission);n.find("input[type=email]")[0].on("keypress",function(n){onRegistrationWidgetSubmission(n)});i=n.attr("id").split("-")[1];initCaptcha(i,onRegistrationWidgetSubmission)}})}var ps,_widgets;ps||(ps=function(n){var t,r,u,i;if(typeof n=="object"){for(t in ps.wrapperFunctions)ps.wrapperFunctions.hasOwnProperty(t)&&(n[t]=ps.wrapperFunctions[t]);return n}for(r=document.querySelectorAll(n),u=[],i=0;i<r.length;i++)u.push(ps(r[i]));return u});ps.isFunction=function(n){return!!(n&&n.constructor&&n.call&&n.apply)};ps.isArray=function(n){return Array.isArray(n)};ps.wrapperFunctions={};ps.wrapperFunctions.find=function(n){for(var i=this.querySelectorAll(n),r=[],t=0;t<i.length;t++)r.push(ps(i[t]));return r};ps.wrapperFunctions.has=function(n){return typeof n=="object"?this.contains(n):this.querySelector(n)!==null};ps.wrapperFunctions.on=function(n,t){var i=this;ps.isArray(n)?n.forEach(function(n){i.on(n,t)}):i.addEventListener(n,t)};window._=ps;ps.wrapperFunctions.attr=function(n){return this.getAttribute(n)};ps.wrapperFunctions.hasAttr=function(n){var t=this.getAttribute(n);return t!==undefined&&t!==null};ps.wrapperFunctions.replaceAttr=function(n,t){this.removeAttribute(n);this.setAttr(n,t)};ps.wrapperFunctions.removeAttr=function(n){this.removeAttribute(n)};ps.wrapperFunctions.setAttr=function(n,t){this.setAttribute(n,t)};ps.wrapperFunctions.addClass=function(n){n&&this.classList.add(n)};ps.wrapperFunctions.hasClass=function(n){return n?this.classList.contains(n):!1};ps.wrapperFunctions.removeClass=function(n){n&&this.classList.remove(n)};ps.wrapperFunctions.toggleClass=function(n){this.hasClass(n)?this.removeClass(n):this.addClass(n)};String.prototype.startsWith||(String.prototype.startsWith=function(n,t){return t=t||0,this.indexOf(n,t)===t});PsFormData.prototype.append=function(n,t){n&&this.values.push({name:n,value:t})};PsFormData.prototype.appendObject=function(n){var i=this,t,r;if(ps.isArray(n))n.forEach(function(n){i.append(n.name,n.value)});else if(n instanceof HTMLCollection)for(t=0;t<n.length;t++)r=n[t],i.append(r.name,r.value);else i.append(n.name,n.value)};ps.params=function(n){var i=[],t;if(ps.isArray(n))n.forEach(function(n){i.push(encodeURIComponent(n.name)+"="+encodeURIComponent(n.value))});else for(t in n)n.hasOwnProperty(t)&&i.push(encodeURIComponent(t)+"="+encodeURIComponent(n[t]));return i.join("&").replace(/%20/g,"+")};ps.paramsFromArray=n=>{if(!ps.isArray(n))return"";const t=[];return n.forEach((n,i)=>{for(let r in n)n.hasOwnProperty(r)&&t.push(`[${i}].${encodeURIComponent(r)}`+"="+encodeURIComponent(n[r]))}),t.join("&").replace(/%20/g,"+")};ps.ajax=function(n){var e=function(t){try{if(n.done)if(t.status===204)n.done(t,t.status);else{var i=t.getResponseHeader("content-type").startsWith("application/json");n.done(t,t.status,i?JSON.parse(t.responseText):t.responseText)}}catch(r){console.error(r)}},r=function(t){try{n.fail&&n.fail(t,t.status,t.statusText)}catch(i){console.error(i)}},u=function(t){try{n.always&&n.always(t,t.status)}catch(i){console.error(i)}},o=function(n,t){return t instanceof FormData?t:t instanceof PsFormData?(n.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),ps.params(t.values)):(n.setRequestHeader("Content-Type","application/json"),JSON.stringify(t))},t=new XMLHttpRequest,i,f;try{if(t.open(n.method||"GET",n.url),n.headers)for(i=0;i<n.headers.length;i++)t.setRequestHeader(n.headers[i].name,n.headers[i].value);n.data&&(f=o(t,n.data));t.onload=function(){t.status>=200&&t.status<300||t.status===304?e(t):r(t);u(t)};t.addEventListener("error",function(){r(t);u(t)});n.beforeSend&&n.beforeSend(t);t.send(f)}catch(s){r(t);u(t)}return t};ps.ajaxResultCodes={Error:1,NotFound:2,Redirect:3,Return:4,Ok:5,Warn:6};ps.notificationTypes={Error:"error",Info:"info",Success:"success",Warn:"warn"};ps.string={isNullOrEmpty:function(n){return typeof n=="undefined"||n===null||n.length===0},isNullOrWhiteSpaces:function(n){return typeof n=="undefined"||n===null||n.match(/^ *$/)!==null},isNullOrWhiteSpacesAndNewLines:function(n){return typeof n=="undefined"||n===null||ps.string.isNullOrEmpty(n.replace(/\s+/,""))},isValidHash:function(n){return/^#[a-z0-9-]+$/i.test(n)}};ps.url={isLocalUrl:function(n){return ps.string.isNullOrEmpty(n)?!1:n.charAt(0)!=="/"?!1:n.length===1||n.charAt(1).match(/[a-z0-9]/i)}};UrlHistory.prototype.items=[];UrlHistory.prototype.clear=function(){this.items=[];this.persistData()};UrlHistory.prototype.hasRecords=function(){return this.items.length>0};UrlHistory.prototype.persistData=function(){sessionStorage.setItem("urlHistory",JSON.stringify(this.items))};UrlHistory.prototype.pop=function(){var t=this,n;do n=t.items.pop();while(n===location.pathname);if(t.persistData(),ps.url.isLocalUrl(n))return n;throw new Error("Invalid URL.");};UrlHistory.prototype.push=function(n){var t=this;ps.url.isLocalUrl(n)&&(t.items.length===0||t.items[t.items.length-1]!==n)&&(t.items.push(n),t.persistData())};UrlHistory.prototype.update=function(){var n=this;n.items.length>2&&n.items[n.items.length-3]===n.items[n.items.length-1]&&(n.items.pop(),n.items.pop(),n.persistData())};ps.urlHistory=new UrlHistory;ps.wrapperFunctions.trigger=function(n,t){var i=document.createEvent("Event");i.initEvent(n,!0,!0);i.data=t;this.dispatchEvent(i)};NotificationRenderer.prototype.getDetailsElement=function(n,t){var r=this,i=ps(document.createElement("div"));return i.addClass("notification-detailboxes"),i.addClass("hidden"),i.addClass(t),n.details.forEach(function(n){var t=ps(document.createElement("div")),u,o,f,e;t.addClass("notification-detailbox");u=ps(document.createElement("div"));u.addClass("notification-detailbox-logobox");o=ps(document.createElement("span"));o.addClass(r.getTypeIconClass(n.type,!0));u.appendChild(o);t.appendChild(u);f=ps(document.createElement("div"));f.addClass("notification-detailbox-textbox");e=ps(document.createElement("div"));e.addClass("notification-detailbox-textbox-message");e.appendChild(document.createTextNode(n.message));f.appendChild(e);t.appendChild(f);i.appendChild(t)}),i};NotificationRenderer.prototype.getTypeIconClass=function(n,t){var i;switch(n){case ps.notificationTypes.Error:case ps.notificationTypes.Warn:i=t?"icomoonicon-notification":"icomoonicon-notification2";break;case ps.notificationTypes.Info:case ps.notificationTypes.Success:i=t?"icomoonicon-info":"icomoonicon-info2";break;default:i=""}return i};NotificationRenderer.prototype.getSummaryElement=function(n,t){var a=this,l="",i,f,e,o,h,c,s,r,u;if(n.message||(l="is-messageless"),i=ps(document.createElement("div")),i.addClass("notification-summarybox"),i.addClass(t),f=ps(document.createElement("div")),f.addClass("notification-summarybox-logobox"),f.addClass(l),e=ps(document.createElement("span")),e.addClass("notification-summarybox-logobox-icon"),e.addClass(a.getTypeIconClass(n.type)),e.addClass(l),f.appendChild(e),i.appendChild(f),o=ps(document.createElement("div")),o.addClass("notification-summarybox-textbox"),h=ps(document.createElement("div")),h.addClass("notification-summarybox-textbox-title"),h.appendChild(document.createTextNode(n.title)),o.appendChild(h),c=ps(document.createElement("div")),c.addClass("notification-summarybox-textbox-message"),c.appendChild(document.createTextNode(n.message)),o.appendChild(c),i.appendChild(o),s=ps(document.createElement("div")),s.addClass("notification-summarybox-actionbox"),n.hasDetails()){r=ps(document.createElement("span"));r.addClass("notification-summarybox-actionbox-icon");r.addClass("icomoonicon-circle-up2");r.addClass(t);r.on("click",function(){var n=ps(this);n.toggleClass("icomoonicon-circle-down2");n.trigger("togglenoticationdetails")});s.appendChild(r)}u=ps(document.createElement("span"));u.addClass("notification-summarybox-actionbox-icon");u.addClass("icomoonicon-cancel-circle");u.addClass(t);u.on("click",function(){ps(this).trigger("closenotification")});return s.appendChild(u),i.appendChild(s),i};NotificationRenderer.prototype.getTypeClass=function(n){var t;switch(n){case ps.notificationTypes.Error:t="is-error";break;case ps.notificationTypes.Info:t="is-info";break;case ps.notificationTypes.Success:t="is-success";break;case ps.notificationTypes.Warn:t="is-warn";break;default:t=""}return t};NotificationRenderer.prototype.run=function(n){var r=this,t=ps(document.createElement("div")),i;t.autoClose=n.type===ps.notificationTypes.Info||n.type===ps.notificationTypes.Success;t.close=function(){document.body.removeChild(this)};t.toggleDetails=function(){t.find(".notification-detailboxes")[0].toggleClass("hidden")};t.addClass("notification");i=r.getTypeClass(n.type);t.addClass(i);t.on("mouseover",function(){t.autoClose=!1});t.on("closenotification",t.close);t.on("togglenoticationdetails",t.toggleDetails);t.appendChild(r.getSummaryElement(n,i));n.hasDetails()&&t.appendChild(r.getDetailsElement(n,i));document.body.appendChild(t);t.autoClose&&setTimeout(function(){t.autoClose&&t.close()},8e3)};Notification.prototype.hasDetails=function(){return this.details.length!==0};Notifier.prototype.error=function(n,t){this.notify(new Notification(ps.notificationTypes.Error,n,t))};Notifier.prototype.info=function(n,t){this.notify(new Notification(ps.notificationTypes.Info,n,t))};Notifier.prototype.notify=function(n){(new NotificationRenderer).run(n)};Notifier.prototype.success=function(n,t){this.notify(new Notification(ps.notificationTypes.Success,n,t))};Notifier.prototype.warn=function(n,t){this.notify(new Notification(ps.notificationTypes.Warn,n,t))};AjaxResultProcessor.prototype.defaultResultCallback=function(n){this.displayNotification(n)};AjaxResultProcessor.prototype.displayNotification=function(n){var i=this,u=i.getNotificationType(n.Messages.Summary.Type),f=n.Messages.Summary.Title,r,t;n.Messages.Summary.Value&&(r=n.Messages.Summary.Value);n.Messages.Details.length>0&&(t=[],n.Messages.Details.forEach(function(n){t.push(new NotificationDetail(i.getNotificationType(n.Type),n.Value))}));(new Notifier).notify(new Notification(u,f,r,t))};AjaxResultProcessor.prototype.getNotificationType=function(n){var t;switch(n){case 1:t=ps.notificationTypes.Success;break;case 2:t=ps.notificationTypes.Warn;break;case 3:t=ps.notificationTypes.Error;break;default:t=ps.notificationTypes.Info}return t};AjaxResultProcessor.prototype.handleResult=function(n,t){var i=this,r,u;if(n.Status===ps.ajaxResultCodes.NotFound)window.location.replace("/notfound");else if(n.Status===ps.ajaxResultCodes.Redirect)n.AdditionalData&&typeof n.AdditionalData.ClearUrlHistory=="boolean"&&n.AdditionalData.ClearUrlHistory&&ps.urlHistory.clear(),window.location=n.ResultSet;else if(n.Status===ps.ajaxResultCodes.Return)try{r=ps.urlHistory.pop();ps.url.isLocalUrl(r)?window.location=r:i.reportError()}catch(f){i.reportError()}else u=t||i.defaultResultCallback,u.call(null,n)};AjaxResultProcessor.prototype.reportError=function(){(new Notifier).error("An error has occurred.","Please contact your administrator.")};var KeyCode={Cancel:3,Help:6,BackSpace:8,Tab:9,Clear:12,Enter:13,Shift:16,Control:17,Alt:18,Pause:19,CapsLock:20,Escape:27,Space:32,PageUp:33,PageDown:34,End:35,Home:36,Left:37,Up:38,Right:39,Down:40,PrintScreen:44,Insert:45,Delete:46,Num0:48,Num1:49,Num2:50,Num3:51,Num4:52,Num5:53,Num6:54,Num7:55,Num8:56,Num9:57,SemiColon:59,Equals:61,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,K:75,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,ContextMenu:93,NumPad0:96,NumPad1:97,NumPad2:98,NumPad3:99,NumPad4:100,NumPad5:101,NumPad6:102,NumPad7:103,NumPad8:104,NumPad9:105,Multiply:106,Add:107,Separator:108,Subtract:109,Decimal:110,Divide:111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,F13:124,F14:125,F15:126,F16:127,F17:128,F18:129,F19:130,F20:131,F21:132,F22:133,F23:134,F24:135,NumLock:144,ScrollLock:145,Comma:188,Period:190,Slash:191,BackQuote:192,OpenBracket:219,BackSlash:220,CloseBracket:221,Quote:222,Meta:224},loadToken=function(n,t,i){var r,u;if(typeof grecaptcha!="undefined"){if(isGRecaptchaV2(i)){for(r=document.getElementsByName("g-recaptcha-response");r.length!==0;)r[0].name="RecaptchaV2Token";t(i);return}u=document.getElementById("RecaptchaClientSecret-"+i).value;grecaptcha.ready(function(){grecaptcha.execute(u,{action:n}).then(function(n){document.getElementById("RecaptchaToken-"+i).value=n;t(i)})})}},isGRecaptchaV2=function(n){var t=document.getElementById("RecaptchaRenderLocation-"+n);return t&&t.children.length>0},removeRecaptchaMasks=function(){var n=document.querySelectorAll(".recaptchaloadingmask");n.forEach(n=>n.classList.remove("recaptchaloadingmask"))},renderRecaptchaV2=function(n){var t,i;typeof grecaptcha!="undefined"&&(t=document.getElementById("RecaptchaRenderLocation-"+n),t.children.length===0?(i=document.getElementById("RecaptchaV2ClientSecret-"+n).value,grecaptcha.ready(()=>{grecaptcha.render(t,{sitekey:i})})):resetAllV2Recaptchas())},resetAllV2Recaptchas=function(){for(var t=document.querySelectorAll("[id^='RecaptchaRenderLocation-']"),i=Array.from(t).filter(n=>n.children.length>0),r=i.length,n=0;n<r;n++)grecaptcha.reset(n)},isRecaptchaEnabled=function(){return document.querySelector("[id^='RecaptchaClientSecret-']")},isOwnCaptchaEnabled=function(){return document.querySelector("[id^='CaptchaImg-']")},recaptchaEventSetup,initRecaptcha=function(){var t,n;if(typeof grecaptcha=="undefined")for(t=document.getElementsByClassName("disable-no-recaptcha"),n=t.length-1;n>=0;n--)t[n].classList.add("hidden");else removeRecaptchaMasks();typeof recaptchaEventSetup=="undefined"&&(recaptchaEventSetup=!0,document.readyState==="complete"||document.readyState==="interactive"?loadRecaptchaScript():document.addEventListener("DOMContentLoaded",loadRecaptchaScript))},loadRecaptchaScript=function(){if(typeof recaptchaClientUrl!="string"){recaptchaErrored();return}var t=document.querySelector("[id^='RecaptchaClientSecret-']").value,n=document.createElement("script");n.id="RecaptchaScript";n.async=!0;n.src=recaptchaClientUrl+t;n.onload=function(){var t,n;for(removeRecaptchaMasks(),t=document.getElementsByClassName("disable-no-recaptcha"),n=t.length-1;n>=0;n--)t[n].classList.remove("hidden")};n.onerror=function(){recaptchaErrored()};document.querySelector("body").appendChild(n)},recaptchaErrored=function(){removeRecaptchaMasks();document.querySelectorAll("[id^='NoRecaptcha-']").forEach(n=>{n.classList.remove("hidden")})},initOwnCaptcha=function(n,t){document.getElementById("CaptchaRefresh-"+n).addEventListener("click",refreshCaptchaImageEventHandler);document.getElementById("RecaptchaToken-"+n).addEventListener("keypress",t)},initCaptcha=function(n,t){isRecaptchaEnabled()?initRecaptcha():isOwnCaptchaEnabled()&&initOwnCaptcha(n,t)},refreshCaptchaImageEventHandler=function(n){var t=n.target.closest("[id^='Recaptcha-']").querySelector("[id^='CaptchaImg-']");refreshCaptchaImages(t);n.preventDefault()},refreshCaptchaImages=function(n){var i,t;(n||(n=document.querySelector("[id^='CaptchaImg-']")),n)&&(i=n.src.includes("refresh=true"),i||(t=document.querySelectorAll("[id^='CaptchaImg-']"),n.addEventListener("load",()=>{for(var i=0;i<t.length;i++)t[i]!==n&&refreshCaptchaImage(t[i],!1)})),refreshCaptchaImage(n,!0))},refreshCaptchaImage=function(n,t){n.src=t?n.src.split("?")[0]+"?refresh=true&dt="+String(Date.now()):n.src.split("?")[0]+"?dt="+String(Date.now())},recaptchaErrors=["There was an issue verifying you via Recaptcha, please try again","Unable to verify you via Invisible Recaptcha, please try again","There was an issue verifying your Recaptcha token, please try again"],htmlContainsRecaptchaError=function(n){return recaptchaErrors.some(t=>{if(n.includes(t))return!0})},isRecaptchaError=function(n){return recaptchaErrors.map(n=>n.toLowerCase()).includes(n.toLowerCase())};_widgets=_("[id^='RegistrationWidget-']");initRegistrationWidget(_widgets)